<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <label>Clave para busqueda<input type="text" id="termino"></label>
    <input type="button" value="Buscar" id="buscar"></br>
    <img src="" alt="duckduckgo" id="Img_DDG" width="500px" height="500px">
   
</body>
<script>

    const url = 'https://duckduckgo10.p.rapidapi.com/search/images?term=gatitos&region=wt-wt&safeSearch=off';
    const options = {
        method: 'GET',
        headers: {
            'X-RapidAPI-Key': '8fd23bd095msh86d2825434432d5p1d45e1jsnffc5245fbe4d',
            'X-RapidAPI-Host': 'duckduckgo10.p.rapidapi.com'
        }
    };

    fetch(url,options)
    .then(response => response.json())
    .then(data => verImg(data));

    
    var botonBuscar = document.getElementById("buscar");
    botonBuscar.addEventListener("click",busq);
    var busqueda = document.getElementById("termino").value;

    function busq(){
        busqueda = document.getElementById("termino").value;
        const url = 'https://duckduckgo10.p.rapidapi.com/search/images?term='+busqueda+'&region=wt-wt&safeSearch=off';
        const options = {
        method: 'GET',
        headers: {
            'X-RapidAPI-Key': '8fd23bd095msh86d2825434432d5p1d45e1jsnffc5245fbe4d',
            'X-RapidAPI-Host': 'duckduckgo10.p.rapidapi.com'
            }
        };

        fetch(url,options)
        .then(response => response.json())
        .then(data => verImg(data));

    }


    var img = document.getElementById("Img_DDG");

    img.addEventListener("click",function(){
        busqueda = document.getElementById("termino").value;
        const url = 'https://duckduckgo10.p.rapidapi.com/search/images?term='+busqueda+'&region=wt-wt&safeSearch=off';
        const options = {
        method: 'GET',
        headers: {
            'X-RapidAPI-Key': '8fd23bd095msh86d2825434432d5p1d45e1jsnffc5245fbe4d',
            'X-RapidAPI-Host': 'duckduckgo10.p.rapidapi.com'
            }
        };

        fetch(url,options)
        .then(response => response.json())
        .then(data => verImg(data));

    });

    function verImg(data){
        let tamañoJson = data.data.length;
        var numeroAleatorio = Math.floor(Math.random()*tamañoJson);
        /*
        console.log("TAMAÑO : "+tamañoJson);
        console.log("NUMERO ALEATORIO : "+numeroAleatorio);
        console.log("data.data[1].image: "+data.data[1].image);
        */
        img.setAttribute("src",data.data[numeroAleatorio].image);
    }

</script>
</html>
